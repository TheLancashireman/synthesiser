Synth keyboard scanner


Arduino nano:
 Pins d5 - d12 = 8-way input
 Pins d2i -d4  = a0-a2to a 74HC138 one-of-8 decoder. Each output (driven low) scans a set of 8 keys
     ==> up to 64 keys
     ==> keyboard has 44 keys (6 rows, one row has only 4 keys)

 Use any remaining A pins for potentiometers (pitch bend etc.)

 scan code

	foreach column 0..COLMAX
		set column drive low
		wait settling time
		for each row 0..ROWMAX
			read row input
			if row key pressed (input=0)
				if keycount[column,row] < max
					keycount[column,row]++
					if keycount[column,row] >= max
						sendkeydown(column,row)
			else
				if keycount[column,row] >= max
					sendkeyup(column, row)
                keycount[column,row] = 0
